data;

set GENERATORS := G1 G2 G3 G4 G5 G6 G7 G8 G9 G10 G11 G12 G13 G14 G15 G16 G17 G18 G19 G20 G21 G22 G23 G24 G25 G26 G27 G28 G29 G30 G31 G32;
set GENPARAMS := Pmin Pmax MINCOST STCOST FUEL MUT MDT RU RD SUR SDR INI a b c; #MC	RU	RD	Pmax	Pmin Ton	Toff	SUR	SDR	K	J	INI	;
#set LINES := L1 L2 L3 L4 L5 L6 L7;
#set LineParams := x PLmax;
set TIME := 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24;
#set BUSES := B1 B2 B3 B4 B5 B6;
set LIN_SEGMENTS := S1 S2 S3;
set HERM_COEF := H1 H2 H3 H4;								#Hermite coefficients 
set BERN_COEF_D2 := M1 M2 M3;						#Bernstein coefficients of deg 2
set BERN_COEF_D3 := N1 N2 N3 N4;				#Bernstein coefficients of deg 3
set BERN_COEF_D4 := R1 R2 R3 R4 R5;			#Bernstein coefficients of deg 4
#param NumGenUnits:= 32;

param N_H :
	H1				H2				H3				H4 :=
1	2516.658788		41.61664762		2658.041139		80
2	2658.041139		80				2858.002149		650
3	2858.002149		650				2784.944458		-98.13792171
4	2784.944458		-98.13792171	2654.756883		-139.8226938
5	2654.756883		-139.8226938	2487.629672		-175.4431601
6	2487.629672		-175.4431601	2296.129939		-212.836676
7	2296.129939		-212.836676		2046.795474		-183.3948656
8	2046.795474		-183.3948656	1910.139754		-122.6852824
9	1910.139754		-122.6852824	1815.144068		-73.12169755
10	1815.144068		-73.12169755	1781.996746		-40.37841987
11	1781.996746		-40.37841987	1746.491961		-7.938599823
12	1746.491961		-7.938599823	1742.480986		49.92662872
13	1742.480986		49.92662872		1847.333988		145.9822551
14	1847.333988		145.9822551		2039.409045		192.9333904
15	2039.409045		192.9333904		2223.559605		115.7629745
16	2223.559605		115.7629745		2299.279616		60.52220856
17	2299.279616		60.52220856		2357.833573		62.91919091
18	2357.833573		62.91919091		2416.895627		37.34086409
19	2416.895627		37.34086409		2447.325969		4.844420472
20	2447.325969		4.844420472		2460			3.97547423
21	2460			3.97547423		2448.824319		-0.187634995
22	2448.824319		-0.187634995	2431.678667		-14.32222295
23	2431.678667		-14.32222295	2432.156816		30
24	2432.156816		30				2450			75.98290304
;

param GenData(tr) :
          Pmin      Pmax      MINCOST      STCOST      FUEL      MUT      MDT     RU     RD     SUR     SDR   INI          a        b       c 		:=
G1        16        20        162.24        5          3         1        1       3      3      3       3     0           -68.64  14.43     0
G2        16        20        162.24        5          3         1        1       3      3      3       3     0           -68.64  14.43     0
G3        15.2      76        145.16       596         1.2       8        4       2      2      2       2     0           13.188  8.199   0.0353
G4        15.2      76        145.16       596         1.2       8        4       2      2      2       2     0           13.188  8.199   0.0353
G5        16        20        162.24        5          3         1        1       3      3      3       3     0           -68.64  14.43     0
G6        16        20        162.24        5          3         1        1       3      3      3       3     0           -68.64  14.43     0
G7        15.2      76        145.16       596         1.2       8        4       2      2      2       2     0           13.188  8.199   0.0353
G8        15.2      76        145.16       596         1.2       8        4       2      2      2       2     0           13.188  8.199   0.0353
G9        25        100       202.25       566         2.3       8        8       7      7      7       7     0           -2.544  7.8986  0.0113
G10       25        100       202.25       566         2.3       8        8       7      7      7       7     0           -2.544  7.8986  0.0113
G11       25        100       202.25       566         2.3       8        8       7      7      7       7     0           -2.544  7.8986  0.0113
G12       69        197       576.15       775         2.3       12       10      3      3      3       3     0           5.8517  7.9425  0.0047
G13       69        197       576.15       775         2.3       12       10      3      3      3       3     0           5.8517  7.9425  0.0047
G14       69        197       576.15       775         2.3       12       10      3      3      3       3     0           5.8517  7.9425  0.0047
G15       2.4       12        24.43        68          2.3       4        2       1      1      1       1     0           2.9404  8.4681  0.2131
G16       2.4       12        24.43        68          2.3       4        2       1      1      1       1     0           2.9404  8.4681  0.2131
G17       2.4       12        24.43        68          2.3       4        2       1      1      1       1     0           2.9404  8.4681  0.2131
G18       2.4       12        24.43        68          2.3       4        2       1      1      1       1     0           2.9404  8.4681  0.2131
G19       2.4       12        24.43        68          2.3       4        2       1      1      1       1     0           2.9404  8.4681  0.2131
G20       54.25     155       448.37       953         1.2       8        8       3      3      3       3     0           18.381  7.589   0.0063
G21       54.25     155       448.37       953         1.2       8        8       3      3      3       3     0           18.381  7.589   0.0063
G22       100       400       885          0           0.6       1        1       20     20     20      20    0           11.914  8.6168  0.0011
G23       100       400       885          0           0.6       1        1       20     20     20      20    0           11.914  8.6168  0.0011
G24       50        50        0            0           0         0        0       0      0      0       0     0             0       0       0
G25       50        50        0            0           0         0        0       0      0      0       0     0             0       0       0
G26       50        50        0            0           0         0        0       0      0      0       0     0             0       0       0
G27       50        50        0            0           0         0        0       0      0      0       0     0             0       0       0
G28       50        50        0            0           0         0        0       0      0      0       0     0             0       0       0
G29       50        50        0            0           0         0        0       0      0      0       0     0             0       0       0
G30       54.25     155       448.37       953         1.2       8        8       3      3      3       3     0           18.381  7.589   0.0063
G31       54.25     155       448.37       953         1.2       8        8       3      3      3       3     0           18.381  7.589   0.0063
G32       140       350       1176         4468        1.2       24       48      4      4      4       4     0           41.144  7.6469  0.0033
;

#Conversion matrix for the first derivative of bernstein polynomials (obtaining BE2 from BE3)
param O:
			M1	M2	M3 :=
	N1	-3		0		0	
	N2	3		-3		0
	N3	0		3		-3
	N4	0		0		3		
;

param W:	
			N1	N2	N3	N4 :=
	H1		1		1		0		0
	H2		0		0		0		0
	H3		0		0		1		1
	H4		0		0		0		0
;

param Slope (tr): #gamma
          S1         S2        S3	:=
G1        14.43       0        0
G2        14.46       0        0
G3        9.97      11.58    13.31
G4        10        11.61    13.34
G5        14.49       0        0
G6        14.4        0        0
G7        10.03     11.64    13.37
G8        9.94      11.55    13.28
G9        8.71      9.42     9.88
G10        8.74     9.45     9.91
G11        8.68     9.39     9.85
G12        8.83     9.22     9.62
G13        8.86     9.25     9.65
G14        8.8      9.19     9.59
G15        10.33    11.67    13.22
G16        10.36    11.7     13.25
G17        10.39    11.73    13.28
G18        10.3     11.64    13.19
G19        10.27    11.61    13.16
G20        8.54     8.9      9.38
G21        8.57     8.93     9.41
G22        8.96     9.21     9.44
G23        8.93     9.18     9.41
G24        0        0        0
G25        0        0        0
G26        0        0        0
G27        0        0        0
G28        0        0        0
G29        0        0        0
G30        8.6     8.96     9.44
G31        8.51    8.87     9.35
G32        8.89    9.24     9.77
;

param Len(tr): #lm
          S1        S2         S3 :=
G1       4.0        0.0        0.0
G2       4.0        0.0        0.0
G3      22.8       22.8       15.2
G4      22.8       22.8       15.2
G5       4.0        0.0        0.0
G6       4.0        0.0        0.0
G7      22.8       22.8       15.2
G8      22.8       22.8       15.2
G9      25.0       30.0       20.0
G10     25.0       30.0       20.0
G11     25.0       30.0       20.0
G12     49.2       39.4       39.4
G13     49.2       39.4       39.4
G14     49.2       39.4       39.4
G15      3.6        3.6        2.4
G16      3.6        3.6        2.4
G17      3.6        3.6        2.4
G18      3.6        3.6        2.4
G19      3.6        3.6        2.4
G20     38.75      31.0       31.0
G21     38.75      31.0       31.0
G22     100.0      120.0      80.0
G23     100.0      120.0      80.0
G24     50.0        0.0        0.0
G25     50.0        0.0        0.0
G26     50.0        0.0        0.0
G27     50.0        0.0        0.0
G28     50.0        0.0        0.0
G29     50.0        0.0        0.0
G30     38.75      31.0       31.0
G31     38.75      31.0       31.0
G32     87.5       52.5       70.0    
;
for {i in GENERATORS} 
{
	for {p in GENPARAMS}
	{
		let Copy_GenData[p,i] := GenData[p,i];
	}
}
for {i in GENERATORS} {
	let GenData['SUR',i] := 60 * GenData['SUR',i];
	let GenData['SDR',i] := 60 * GenData['SDR',i];
	let GenData['RU',i] := 60 * GenData['RU',i];
	let GenData['RD',i] := 60 * GenData['RD',i];
}

let W['H2', 'N2'] := 1/3;
let W['H4', 'N3'] := -1/3;

for {t in TIME, b in BERN_COEF_D3} {
	let L_B [b,t] := sum {h in HERM_COEF} (W[h,b] * N_H[t,h]);
}

for {t in TIME, bp in BERN_COEF_D2} {
	let Lp_B [bp,t] := sum {b in BERN_COEF_D3} (O[b, bp] * L_B[b,t]);
}

